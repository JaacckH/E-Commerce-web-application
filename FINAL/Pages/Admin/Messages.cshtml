@page
@model FINAL.Pages.Admin.MessagesModel
@{
}

<div class="row">
    <div class="col-12">
        <h6 class="title">Admin Panel</h6>
        <h1>Messages</h1>
        <hr />
    </div>
    <div id="search-area" class="row col-12">
        <div class="col-12 col-md-6 col-lg-4 col-xl-3"><input class="form-control" id="search-rows" type="text" placeholder="Search.."></div>
        <div class="col-12 col-md-6 col-lg-4 col-xl-3"><input class="form-control d-none" id="refine-search" type="text" placeholder="refined.."></div>
    </div>
    <div class="col-12 col-lg-6 order-2 order-lg-1">
        <!--
    <div id="data-header" class="row d-none">
        <div class="col-4 col-md-2 col-xl-2">
            <b>UserID ID</b>
        </div>
        <div class="d-none d-md-block col-5 col-md-3 col-xl-3">
            From
        </div>
        <div class="d-none d-md-block col-5 col-md-3 col-xl-2">
            Sent Via
        </div>
        <div class="d-none d-md-block col-5 col-md-3 col-xl-3">
            Date
        </div>
        <div class="d-none d-md-block col-5 col-md-2 col-xl-2">
            Status
        </div>
    </div>
        -->
        <h5 class="mt-3">Order Queries</h5>

        @foreach (String user in Classes.Messages.adminGetUsers())
        {
            <ul class="list-group" id="data-list">
                <!-- message starts -->
                <li id="data-row-@user" class="admin-list">
                    <div id="summary-panel-@user" class="row" onclick="OpenDetails('@user')">
                        <div class="col-6 col-md-6 col-xl-4">
                            <b>#@user</b>
                        </div>
                        <div class="col-6 col-md-6 col-xl-3">
                            Chatbox
                        </div>

                        <div class="col-6 col-md-6 col-xl-3">
                            {RECENT}
                        </div>
                        <div class="col-6 col-md-6 col-xl-2">
                            {STATUS} <!-- New, Read, Closed -->
                        </div>
                    </div>
                    <!-- expanded start -->
                    <div id="expanded-panel-@user" class="row d-none">
                        <div class="col-6">
                            <h4>#@user ({NAME})</h4>
                        </div>
                        <div class="col-6 admin-close-view">
                            <span onclick="closeDetails('@user')"><i class="fas fa-times fa-1-5x"></i></span>
                        </div>
                        <div class="col-12 col-md-12">

                            <div id="send-message-btn" class="row col-12" style="margin-top:15px;">
                                <button type="button" class="btn btn-outline-secondary" data-toggle="modal" data-target="#staticBackdrop">Send Message</button>
                            </div>
                            <h4>Corrospondance:</h4>

                            @Html.Raw(Classes.Messages.getAdminMessages(Classes.UserFunctions.getUserID(HttpContext.Request.Cookies["SessionID"]), user)))

                        </div>
                    </div>

                    <!-- expanded end -->
                </li>
            </ul>

        }

    </div>

    <div class="col-12 col-lg-6 order-1 order-lg-2">
        <!--
    <div id="data-header" class="row d-none">
        <div class="col-4 col-md-2 col-xl-2">
            <b>UserID ID</b>
        </div>
        <div class="d-none d-md-block col-5 col-md-3 col-xl-3">
            From
        </div>
        <div class="d-none d-md-block col-5 col-md-3 col-xl-2">
            Sent Via
        </div>
        <div class="d-none d-md-block col-5 col-md-3 col-xl-3">
            Date
        </div>
        <div class="d-none d-md-block col-5 col-md-2 col-xl-2">
            Status
        </div>
    </div>
        -->

        <h5 class="mt-3">Live Queries</h5>

        @foreach (String user in Classes.Messages.adminGetUsers())
        {
            <ul class="list-group" id="data-list">
                <!-- message starts -->
                <li id="data-row-@user" class="admin-list">
                    <div id="summary-panel-@user" class="row" onclick="OpenDetails('@user')">
                        <div class="col-6 col-md-6 col-xl-4">
                            <b>#@user</b>
                        </div>
                        <div class="col-6 col-md-6 col-xl-3">
                            Chatbox
                        </div>
                       
                        <div class="col-6 col-md-6 col-xl-3">
                            {RECENT}
                        </div>
                        <div class="col-6 col-md-6 col-xl-2">
                            {STATUS} <!-- New, Read, Closed -->
                        </div>
                    </div>
                    <!-- expanded start -->
                    <div id="expanded-panel-@user" class="row d-none">
                        <div class="col-6">
                            <h4>#@user ({NAME})</h4>
                        </div>
                        <div class="col-6 admin-close-view">
                            <span onclick="closeDetails('@user')"><i class="fas fa-times fa-1-5x"></i></span>
                        </div>
                        <div class="col-12 col-md-12">

                            <div id="send-message-btn" class="row col-12" style="margin-top:15px;">
                                <button type="button" class="btn btn-outline-secondary" data-toggle="modal" data-target="#staticBackdrop">Send Message</button>
                            </div>
                            <h4>Corrospondance:</h4>

                            @Html.Raw(Classes.Messages.getAdminMessages(Classes.UserFunctions.getUserID(HttpContext.Request.Cookies["SessionID"]), user)))

                        </div>
                    </div>

                    <!-- expanded end -->
                </li>
            </ul>

        }

    </div>
</div>



<div class="modal fade" id="staticBackdrop" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Send Message</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <textarea></textarea>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary">Send</button>
            </div>
        </div>
    </div>
</div>