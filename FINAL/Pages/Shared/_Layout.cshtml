<!DOCTYPE html>
@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor

@{
    GC.Collect();
    String SessionID = "";
    foreach (var cookie in HttpContextAccessor.HttpContext.Request.Cookies)
    {
        if (cookie.Key == "SessionID")
        {
            SessionID = cookie.Value;
        }
    }

    IActionResult uploadImage()
    {
        try
        {

            String title = HttpContextAccessor.HttpContext.Request.Form["imagepost-title"];
            String community = HttpContextAccessor.HttpContext.Request.Form["community-select-2"];
            String flairs = HttpContextAccessor.HttpContext.Request.Form["flair-select-2"];
            String imageData = HttpContextAccessor.HttpContext.Request.Form["imagepost-data"];
            String user = Classes.DBFunctions.getUsernameFromSessionID(SessionID);

            int CommunityID = Classes.Communities.getCommunityIDFromName(community);
            int flairID = Classes.Communities.getFlairIDFromName(flairs);
            String date = DateTime.Now.ToString();

            if (title != null && title != "" && CommunityID > -1 && flairID != 0 && imageData != null && imageData != "")
            {
                Classes.DBFunctions.SendQuery("INSERT INTO CommunityPosts (Username, CommunityID, Date, FlairID, Title, Image) " +
                "VALUES('" + user + "', '" + CommunityID + "', '" + date + "', '" + flairID + "', '" + title + "', '" + imageData + "')");
                HttpContextAccessor.HttpContext.Response.Redirect("/");
                Classes.Shards.giveShards(user, 3);
            }

        }
        catch { }
        return null;
    }

    if (SessionID != "")
    {
        if (Classes.DBFunctions.getUserData(Classes.DBFunctions.getUsernameFromSessionID(SessionID), "Banned") == "True")
        {
            HttpContextAccessor.HttpContext.Response.Redirect("/BANNED");
        }
    }

    if (Classes.DBFunctions.getUsernameFromSessionID(SessionID) == null || Classes.DBFunctions.getUsernameFromSessionID(SessionID) == "")
    {
        HttpContextAccessor.HttpContext.Response.Cookies.Delete("SessionID");
        //HttpContextAccessor.HttpContext.Response.Redirect("/");
    }

    HttpContextAccessor.HttpContext.Response.Cookies.Delete("Com");

}
<body class="@Classes.DBFunctions.getUserColorMode(Classes.DBFunctions.getUsernameFromSessionID(SessionID))">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <!--<link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:ital,wght@0,200;0,300;0,400;0,700;0,800;1,200&display=swap" rel="stylesheet">-->
    <style>
        @@font-face {
            font-family: 'Abel';
            font-style: normal;
            font-weight: 400;
            font-display: swap;
            src: url('/MwQ5bhbm2POE2V9BPQ.woff2') format('woff2');
            unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
        }
    </style>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="~/lib/fontawesome/css/all.css">
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.css" />
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap-grid.css" />
    <link href="~/lib/bootstrap/bootstrap-tagsinput.css" rel="stylesheet" />
    <link rel="stylesheet" href="@Url.Content("~/css/main.css")" />
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/typeahead.js/0.11.1/typeahead.bundle.min.js"></script>



    <script src="~/js/signalr/dist/browser/signalr.js"></script>
    <script src="~/js/chat.js"></script>


    <div id="page-loader">

        @Html.Raw(Classes.LoadingScreen.getLoadingScreen(Classes.DBFunctions.getUsernameFromSessionID(SessionID)))

    </div>

    <div id="tempbody" class="blurbody">
        <!-- Modal -->
        <div class="modal fade" id="confirm-delete-modal" tabindex="-1" aria-labelledby="deleteAccModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="deleteAccModalLabel">Delete Account</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <p>Are you sure you want to delete your account, this can't be undone?</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="arc-btn" data-dismiss="modal">Cancel</button>
                        <button type="button" class="arc-btn" onclick="DeleteAccount();">Delete Account</button>
                    </div>
                </div>
            </div>
        </div>

        <nav class="navbar navbar-expand-lg sticky-top">
            <a class="navbar-brand" href="#">
                <img src="/images/logodark.png" alt="" width="170" class="d-inline-block align-top dark-logo" style="position:absolute; left:calc(50% - 85px); top:2px;" onclick="window.location.href = '/';"/>
                <img src="/images/logolight.png" alt="" width="170" class="d-inline-block align-top light-logo" style="position:absolute; left:calc(50% - 85px); top:2px;" onclick="window.location.href = '/';" />
            </a>
            <i class="fas fa-bars navbar-toggler" type="button" data-toggle="collapse" data-target="#mainNavbarToggler" aria-controls="mainNavbarToggler" aria-expanded="false" aria-label="Toggle navigation"></i>
            <div class="collapse navbar-collapse" id="mainNavbarToggler">
                @if (SessionID != null && SessionID != "")
                {
                    <ul class="navbar-nav mr-auto mt-2 mt-lg-0">

                        <li class="nav-item active">
                            <button onclick="menuActive(4)" style="outline: none; margin: 0; margin-top: 5px; margin-right: 25px; border: none; padding: 0px; border-radius: 20px; background-color: transparent; float: right;"><i class="fab fa-innosoft fa-shard" style="float:left; color:var(--text); margin-top:8px;"></i><p id="shard-counter-1" style="margin:0; margin-left:5px; float:left; color:var(--opposite); font-size:16pt; margin-top:4px;">@Pages.Classes.Shards.getShardsAmount(Classes.DBFunctions.getUsernameFromSessionID(HttpContextAccessor.HttpContext.Request.Cookies["SessionID"]))</p></button>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" onclick="clearNotifications()">
                                <i id="notif-bell" class="far fa-bell fa-shard notif-bell @Classes.Notifications.notificationClass(Classes.DBFunctions.getUsernameFromSessionID(HttpContextAccessor.HttpContext.Request.Cookies["SessionID"]))"></i>
                            </a>
                            <div class="dropdown-menu notification-menu" aria-labelledby="navbarDropdown">
                                <div class="row arc-notif-cont" id="notifications">
                                    @Html.Raw(Pages.Classes.Notifications.getNotifications(Pages.Classes.DBFunctions
                                   .getUsernameFromSessionID(HttpContextAccessor.HttpContext.Request.Cookies["SessionID"])));
                                    <!-- notification 2 Ends Here -->
                                </div>
                            </div>
                        </li>
                    </ul>
                }
                <ul class="navbar-nav ml-auto">

                    @if (SessionID != null && SessionID != "")
                    {
                        <li class="nav-item">
                            <div class="bar-header">
                                <input id="small-search" type="text" placeholder="Search..." /><!-- <i class="fas fa-location-arrow" onclick="searchActive(); loop();"></i> -->
                            </div>
                        </li>
                    }
                    <li class="nav-item login-logout-btn">
                        @if (SessionID != null && SessionID != "")
                        {
                            <a class="nav-link active" onclick="redirectLogout()">LOGOUT</a>
                        }
                        else
                        {
                            <a class="nav-link active" onclick="redirectLogin()">LOGIN</a>
                        }
                    </li>
                </ul>
            </div>
        </nav>

        <div class="alert" id="alert-box" style="visibility:hidden; cursor:pointer;">
            <strong>UH-OH</strong> <p id="alert-message"></p>
        </div>

        <div class="success" id="success-box" style="visibility:hidden; cursor:pointer;">
            <strong>SUCCESS</strong> <p id="success-message"></p>
        </div>

        <div class="acknowledge" id="acknowledge-box" style="visibility:hidden; cursor:pointer;">
            <strong>DONE</strong> <p id="acknowledge-message"></p>
        </div>

        <div id="right-menu" class="d-none d-sm-none d-md-none d-lg-block">
            @Html.Raw(Classes.Communities.getRightBarCommunities(Classes.DBFunctions.getUsernameFromSessionID(SessionID)))
        </div>

        <div class="arc-side-bar">
            @if (Classes.Communities.isAdmin(Classes.DBFunctions.getUsernameFromSessionID(HttpContextAccessor.HttpContext.Request.Cookies["SessionID"])))
            {
                <div class="arc-side-btn">
                    <i class="fas fa-user-shield fa-2x" onclick="menuActive(6)"></i>
                </div>
            }
            else
            {

            }

            <div class="arc-side-btn">
                <i class="fas fa-search fa-2x" onclick="menuActive(1); loop();"></i>
            </div>
            <div class="arc-side-btn">
                <i class="fas fa-igloo fa-shard" onclick="window.location.href = '/'"></i>
            </div>
            <div class="arc-side-btn">
                <i class="fas fa-user-circle fa-2x" onclick="navigateMyProfile();"></i>
            </div>
            <div class="arc-side-btn">
                <i class="fas fa-comment-dots fa-2x" onclick="menuActive(2); setConnectionID();"></i>
            </div>
            <div class="arc-side-btn">
                <i class="fas fa-plus fa-2x" onclick="selectPost(1); menuActive(3);"></i>
            </div>
            <div class="arc-side-btn">
                <i class="fas fa-gamepad fa-2x" onclick="menuActive(7)"></i>
            </div>
            <div class="arc-side-btn">
                <i class="fab fa-innosoft fa-2x" onclick="menuActive(4)"></i>
            </div>
            <div class="arc-side-btn">
                <i class="fas fa-sliders-h fa-shard" onclick="menuActive(5); LoadProfile(); "></i>
            </div>
        </div>
        <!-- side menu end -->

        <div id="wrapper" class="lightMode">
            <label id="arc-search-icon" for="overlay-toggle" class="arc-search-icon hidden" onclick="menuActive(1)"><i class="fas fa-search fa-2x" onclick="menuActive(1)"></i></label>
            <input type="checkbox" class="overlay-toggle" id="overlay-toggle" />

            <!--
    <label id="menu-button" class="menu-button" for="overlay-toggle" onclick="menuClose()">

        <div class="line"></div>
        <div class="line"></div>
        <div class="line"></div>

        <i "fa-2x fas fa-times"></i>
    </label>
            -->
            <i id="menu-button" class="menu-button fas fa-times fa-2x" onclick="menuClose()"></i>
            @if (SessionID != null && SessionID != "")
            {
                <!-- Site Overlay Start -->
                <div id="site-overlay">
                    <!-- Site Search Start -->
                    <div id="arc-site-post">
                        <h1 class="side-panel-header">SELECT A POST TYPE</h1>
                        <nav>
                            <div class="nav new-post center-pills nav-pills nav-fill" id="nav-tab" role="tablist">
                                <a class="nav-link" id="nav-text-tab" data-toggle="tab" href="#nav-text-post" role="tab" aria-controls="nav-text-post" aria-selected="true">TEXT</a>
                                <a class="nav-link" id="nav-image-tab" data-toggle="tab" href="#nav-image-post" role="tab" aria-controls="nav-image-post" aria-selected="false">IMAGE</a>
                                <a class="nav-link active" id="nav-youtube-tab" data-toggle="tab" href="#nav-youtube-post" role="tab" aria-controls="nav-youtube-post" aria-selected="false">YOUTUBE VIDEO</a>

                            </div>
                        </nav>
                        <div class="tab-content" id="nav-tabContent">
                            <div class="tab-pane show text-post" id="nav-text-post" role="tabpanel" aria-labelledby="nav-text-tab">

                            </div>
                            <!-- Start Image Post -->
                            <div class="tab-pane image-post" id="nav-image-post" role="tabpanel" aria-labelledby="nav-image-tab">
                                <form asp-action="@uploadImage()">
                                    <div class="row">
                                        <div class="col-lg-12 col-xl-5">
                                            <input type="text" class="post-textbox" id="imagepost-title" name="imagepost-title" placeholder="POST TITLE" />
                                        </div>

                                        <div class="col-lg-6 col-xl-4">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <label class="input-group-text" for="community-select-2">COMMUNITIES</label>
                                                </div>
                                                <select class="custom-select" id="community-select-2" name="community-select-2">
                                                    @Html.Raw(Classes.Communities.getUserCommunitiesNames(Classes.DBFunctions.getUsernameFromSessionID(SessionID)));
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-lg-6 col-xl-3">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <label class="input-group-text" for="flair-select-2">CARDS</label>
                                                </div>
                                                <select class="custom-select" id="flair-select-2" name="flair-select-2">
                                                    <option selected=selected value="null">CHOOSE</option>
                                                    @Html.Raw(Classes.Communities.getCommunitiesFlairs())
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-12">
                                            <div class="post-img-cont">
                                                <img class="post-img-preview embed-responsive embed-responsive-16by9 no-display" id="imagepost-image" src="https://images.unsplash.com/photo-1534423861386-85a16f5d13fd?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=2250&q=80" />
                                            </div>
                                        </div>
                                        <div class="col-lg-12">
                                            <div class="row">
                                                <div class="col-12 col-xl-6">
                                                    <label class="arc-btn imagepicker-lbl" for="imagepicker">UPLOAD IMAGE</label>
                                                    <input hidden onchange="uploadImage()" type="file"
                                                           id="imagepicker" name="imagepicker"
                                                           accept="image/png, image/jpeg" />
                                                    <input style="position:absolute; z-index:0; visibility:hidden;" id="imagepost-data" name="imagepost-data" type="text" readonly=readonly />
                                                </div>
                                                <div class="col-12 col-xl-6">
                                                    <button class="arc-btn" type="submit">POST</button>

                                                    <!--<button id="post-image" onclick="addPost(1);">POST</button>-->
                                                </div>
                                            </div>


                                        </div>
                                    </div>
                                </form>
                            </div>
                            <!-- Start Video Post -->
                            <div class="tab-pane youtube-post active" id="nav-youtube-post" role="tabpanel" aria-labelledby="nav-youtube-tab">

                            </div>
                            <!-- End of Youtube Post -->
                        </div>
                    </div>
                    <div id="arc-site-shopping">
                        <h1 class="side-panel-header">SHOP</h1>
                        <div class="row arc-shop-page">
                            <div class="col-12">
                                <ul class="nav mb-3" id="pills-tab" role="tablist">
                                    <li class="nav-pills" role="presentation">
                                        <a class="nav-link active" id="shop-home-tab" data-toggle="pill" href="#shop-home" role="tab" aria-controls="shop-home" aria-selected="true">SHOP</a>
                                    </li>
                                    <li class="nav-pills" role="presentation">
                                        <a class="nav-link" id="shop-purchased-tab" data-toggle="pill" href="#shop-purchased" role="tab" aria-controls="shop-purchased" aria-selected="false">PURCHASED</a>
                                    </li>
                                    <li>
                                        <button onclick="menuActive(4)" style="outline: none; margin: 0; margin-top: 3px; margin-right: 25px; border: none; padding: 0px; border-radius: 20px; background-color: transparent; float: right;"><i class="fab fa-innosoft fa-shard" style="float:left; color:var(--text); margin-top:8px;"></i><p id="shard-counter-2" style="margin:0; margin-left:5px; float:left; color:var(--opposite); font-size:16pt; margin-top:4px;">@Pages.Classes.Shards.getShardsAmount(Classes.DBFunctions.getUsernameFromSessionID(HttpContextAccessor.HttpContext.Request.Cookies["SessionID"]))</p></button>
                                    </li>
                                </ul>
                            </div>
                            <div class="col-12">
                                <div class="tab-content" id="pills-tabContent">
                                    <div class="tab-pane fade show active" id="shop-home" role="tabpanel" aria-labelledby="shop-home-tab">
                                        <div class="row" id="store-forsale">
                                            <!-- Start of card one -->
                                            @Html.Raw(Pages.Classes.Store.listProductsForSale(HttpContextAccessor.HttpContext.Request.Cookies["SessionID"]))
                                            <!-- end of card 1 -->
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="shop-purchased" role="tabpanel" aria-labelledby="shop-purchased-tab">
                                        <div class="row" id="store-owned">
                                            <!-- Start of card one -->
                                            @Html.Raw(Pages.Classes.Store.listOwnedProducts(HttpContextAccessor.HttpContext.Request.Cookies["SessionID"]))
                                            <!-- end of card 1 -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="arc-site-communities" style="background-color: var(--background-2); border-radius: 20px; padding:10px 50px; padding-left:100px; margin-top:40px;">
                        <h1 class="arc-title">RECOMMENDED COMMUNITIES</h1>
                        <div id="public-communities" class="row ml-md-n5">
                            <div class="col-12">
                                <div class="col-4 filter ">
                                    <div class="input-group mr-2">
                                    </div>
                                </div>
                            </div>

                            <!-- Start of card one -->
                            @Html.Raw(Classes.Communities.getRecommendedCommunities(Classes.DBFunctions.getUsernameFromSessionID(HttpContextAccessor.HttpContext.Request.Cookies["SessionID"])))
                            <!-- end pagination -->
                        </div>
                        <h1 class="arc-title">CREATE COMMUNITY</h1>
                        <div class="row" id="create-comunity-cont">
                            <div class="col-md-12 col-lg-6">
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text" id="inputGroup-sizing-default">Community Name</span>
                                    </div>
                                    <input type="text" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default" id="create-community-name" />
                                </div>
                            </div>
                            <div class="col-md-12 col-lg-6">
                                <div class="filter">
                                    <div class="input-group">
                                        <div class="input-group-prepend">
                                            <label class="input-group-text" for="inputGroupSelect01">Community Type</label>
                                        </div>
                                        <select class="custom-select" id="create-community-type">
                                            <option selected="">PRIVATE</option>
                                            <option value="3">HIDDEN</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12">
                                <textarea id="create-community-bio" placeholder="Community Bio"></textarea>
                                <button class="arc-btn" onclick="createCommunity()">Create</button>
                            </div>
                        </div>
                    </div>
                    <div id="arc-site-settings">
                        <h1 class="side-panel-header">ACCOUNT SETTINGS</h1>
                        <div class="row arc-settings-page">
                            <div class="row col-12 no-box-styling main-settings">
                                <div class="col-lg-12 col-xl-8 mr-xl-2 main-container order-xl-1 order-2">

                                    <!-- Settings Line Start-->
                                    <div class="row container-row">
                                        <div class="col-12 col-sm-3">
                                            <p class="input-header setting-text">USERNAME: </p>
                                        </div>
                                        <div class="col-12 col-sm-9 input-area">
                                            <div class="row">
                                                <div class="col-10">
                                                    <p id="settings-text-1" class="settings-text ">{Username}</p>

                                                </div>
                                                <div class="col-2 edit-btn-cont">

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Settings Line End-->

                                    <div class="row container-row">

                                        <div class="col-12 settings-bio-cont">
                                            <div class="row settings-bio">
                                                <div class="col-12 col-sm-3">
                                                    <p class="input-header setting-text">BIOGRAPHY: </p>
                                                </div>
                                                <div class="col-12 col-sm-9 input-area">
                                                    <div class="row">
                                                        <div class="col-10 text-container">
                                                            <p id="settings-text-0" class="settings-text ">This Users hasn't currently got a BIO</p>
                                                            <textarea type="text" id="settings-input-0" class="settings-input display-n"  onfocusout="toggleEditSetting(0)"></textarea>
                                                        </div>
                                                        <div class="col-2 edit-btn-cont">
                                                            <i class="fas fa-pen toggle-edit-mode" onclick="toggleEditSetting(0)"></i>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- Settings Line 0 End-->
                                        </div>
                                    </div>

                                    <!-- Settings Line 4 Start-->
                                    <div class="row container-row">
                                        <div class="col-12 col-sm-3">
                                            <p class="input-header setting-text">EMAIL: </p>
                                        </div>
                                        <div class="col-12 col-sm-9 input-area">
                                            <div class="row">
                                                <div class="col-10">
                                                    <p id="settings-text-4" class="settings-text ">{Email}</p>
                                                    <input type="text" id="settings-input-4" class="settings-input display-n" onfocusout="toggleEditSetting(4)" />
                                                </div>
                                                <div class="col-2 edit-btn-cont">
                                                    <i class="fas fa-pen toggle-edit-mode" onclick="toggleEditSetting(4)"></i>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Settings Line 4 End-->
                                    <!-- Settings Line 5 Start-->
                                    <div class="row container-row">
                                        <div class="col-12 col-sm-3">
                                            <p class="input-header setting-text">GENDER: </p>
                                        </div>
                                        <div class="col-12 col-sm-9 input-area">
                                            <div class="input-group">
                                                <select class="custom-select" id="genderSelect">
                                                    <option selected value="0">Private</option>
                                                    <option value="1">MALE</option>
                                                    <option value="2">FEMALE</option>
                                                    <option value="3">OTHER</option>
                                                </select>
                                            </div>
                                            <!--<div class="row">
        <div class="col-10">
            <p id="settings-text-5" class="settings-text ">{Gender}</p>
            <input type="text" id="settings-input-5" class="settings-input display-n" />
        </div>
        <div class="col-2 edit-btn-cont">
            <i class="fas fa-pen toggle-edit-mode" onclick="toggleEditSetting(5)"></i>
        </div>
    </div>-->
                                        </div>
                                    </div>
                                    <!-- Settings Line 5 End-->
                                    <!-- Settings Line 0 Start-->
                                    <div class="row container-row">
                                        <div class="col-12 col-sm-3">
                                            <p class="input-header setting-text">
                                                FAVOURITE COMMUNITIES:
                                            </p>
                                        </div>
                                        <div class="col-12 col-sm-9 input-area">
                                            <div class="row">
                                                <div class="col-10">
                                                    <div class="tags-selection-cont fcommunity-select">
                                                        <input id="fav-community"
                                                               class="tags-selection-cont"
                                                               type="text"
                                                               placeholder="COMMUNITIES" />
                                                    </div>
                                                </div>
                                                <div class="col-2 edit-btn-cont">
                                                    <i class="fas fa-pen toggle-edit-mode" onclick="Gamesfocus()"></i>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Settings Line 0 End-->

                                </div>
                                <div class="col-lg-12 col-xl-4 no-box-styling additional-container order-xl-2 order-1">
                                    <div class="additional-settings">
                                        <div class="settings-row">
                                            <div class="col-12 profile-picture-cont">
                                                <div class="profile-picture" style="background-size:cover; background-image: url(@Classes.DBFunctions.getProfilePicture(Classes.DBFunctions.getUsernameFromSessionID(SessionID)))"></div>
                                            </div>
                                            <button class="arc-btn" type="button" data-toggle="collapse" data-target="#create-comunity-cont" aria-expanded="false" aria-controls="create-comunity-cont" onclick="menuActive(4);">
                                                CHANGE PROFILE PICTURE
                                            </button>
                                        </div>
                                        <div class="settings-row">
                                            <button class="arc-btn" type="button" data-toggle="collapse" data-target="#create-comunity-cont" aria-expanded="false" aria-controls="create-comunity-cont" onclick="window.location.href = '/Login?forgotten'">
                                                CHANGE PASSWORD
                                            </button>
                                        </div>


                                        <div class="settings-row">
                                            <div class="row">
                                                <div class="col-md-6 col-lg-12 col-xl-6">
                                                    <p>ACCOUNT TYPE:</p>
                                                </div>
                                                <div class="col-md-6 col-lg-12 col-xl-6">
                                                    @{ if (Classes.Communities.isAdmin(Classes.DBFunctions.getSessionIDFromUsername(HttpContextAccessor.HttpContext.Request.Cookies["SessionID"])))
                                                        {
                                                            <p>ADMIN</p>
                                                        }
                                                        else
                                                        {
                                                            <p>STANDARD USER</p>
                                                        }
                                                    }
                                                </div>
                                            </div>
                                        </div>
                                        <div class="settings-row">
                                            <!-- Toggle Color Button Start -->
                                            <div class="row">
                                                <div class="col-6">
                                                    <p>COLOUR MODE</p>
                                                </div>
                                                <div class="col-6">
                                                    <div class="cMode-container">
                                                        <label class="cMode-switch" for="checkbox">
                                                            <input onclick="toggleMode(); toggleTheme();" class="cMode-input" type="checkbox" id="checkbox" />
                                                            <div class="cMode-slider round"></div>
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- Toggle Color Button End -->
                                        </div>
                                        <div class="settings-row">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <label class="input-group-text" for="inputGroupSelect01">LANGUAGE</label>
                                                </div>
                                                <select class="custom-select" id="inputGroupSelect01">
                                                    <option selected=selected value="0">UNITED KINGDOM (DEFAULT)</option>
                                                    <option value="2">ANTIGUA AND BARBUDA</option>
                                                    <option value="3">AUSTRALIA</option>
                                                    <option value="4">THE BAHAMAS</option>
                                                    <option value="5">BARBADOS</option>
                                                    <option value="6">BELIZE</option>
                                                    <option value="7">DOMINICA</option>
                                                    <option value="8">GRENADA</option>
                                                    <option value="9">GUYANA</option>
                                                    <option value="10">IRELAND</option>
                                                    <option value="11">JAMAICA</option>
                                                    <option value="12">MALTA</option>
                                                    <option value="13">NEW ZEALAND</option>
                                                    <option value="14">ST KITTS AND NEVIS</option>
                                                    <option value="15">ST LUCIA</option>
                                                    <option value="16">ST VINCENT AND THE GRENADINES</option>
                                                    <option value="17">TRINIDAD AND TOBAGO</option>
                                                    <option value="18">AMERICA</option>

                                                </select>
                                            </div>
                                        </div>

                                    </div>

                                </div>
                            </div>

                            <div class="col-12 col-sm-6 col-lg-6 col-xl-8 order-lg-4 order-5">
                                <div id="save-settings" class="settings-row">
                                    <button class="arc-btn" type="button" onclick="UpdatingProfile();">
                                        Save Changes
                                    </button>
                                </div>
                            </div>
                            <div class="col-12 col-sm-6 col-lg-6 col-xl-4 settings-final-row delete-btn order-xl-5 order-4 no-box-styling">
                                <div class="settings-row">
                                    <button class="arc-btn" type="button" data-toggle="modal" data-target="#confirm-delete-modal">
                                        Delete Account <i class="fas fa-exclamation-circle"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!--<div class="row arc-settings-page">
                <div class="col-lg-12 col-xl-4 profile-picture-cont">
                    <div class="profile-picture"></div>
                </div>
                <div class="col-lg-12 col-xl-8 settings-header">
                    <h1>USER SETTINGS</h1>
                </div>
                <div class="row col-12 no-box-styling">
                    <div class="col-lg-12 col-xl-4 additional-container">

                        <div class="additional-settings">
                            <div class="settings-row">
                                <button class="arc-btn" type="button" data-toggle="collapse" data-target="#create-comunity-cont" aria-expanded="false" aria-controls="create-comunity-cont">
                                    Change Profile Picture
                                </button>
                            </div>
                            <div class="settings-row">
                                <button class="arc-btn" type="button" data-toggle="collapse" data-target="#create-comunity-cont" aria-expanded="false" aria-controls="create-comunity-cont">
                                    Change Password
                                </button>
                            </div>

                            <div class="settings-row">
                                <div class="row">
                                    <div class="col-md-6 col-lg-12 col-xl-6">
                                        <p>ACCOUNT TYPE:</p>
                                    </div>
                                    <div class="col-md-6 col-lg-12 col-xl-6">
                                        <p id="AccountType"></p>
                                    </div>
                                </div>
                            </div>
                            <div class="settings-row">

                                <div class="row">
                                    <div class="col-6">
                                        <p>COLOUR MODE<p>
                                    </div>
                                    <div class="col-6">
                                        <div class="cMode-container">
                                            <label class="cMode-switch" for="checkbox">
                                                <input onclick="toggleMode()" class="cMode-input" type="checkbox" id="checkbox" />
                                                <div class="cMode-slider round"></div>
                                            </label>
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <div class="settings-row">
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <label class="input-group-text" for="inputGroupSelect01">LANGUAGE</label>
                                    </div>
                                    <select class="custom-select" id="inputGroupSelect01">
                                        <option selected="0">UNITED KINGDOM (DEFAULT)</option>
                                        <option value="2">ANTIGUA AND BARBUDA</option>
                                        <option value="3">AUSTRALIA</option>
                                        <option value="4">THE BAHAMAS</option>
                                        <option value="5">BARBADOS</option>
                                        <option value="6">BELIZE</option>
                                        <option value="7">DOMINICA</option>
                                        <option value="8">GRENADA</option>
                                        <option value="9">GUYANA</option>
                                        <option value="10">IRELAND</option>
                                        <option value="11">JAMAICA</option>
                                        <option value="12">MALTA</option>
                                        <option value="13">NEW ZEALAND</option>
                                        <option value="14">ST KITTS AND NEVIS</option>
                                        <option value="15">ST LUCIA</option>
                                        <option value="16">ST VINCENT AND THE GRENADINES</option>
                                        <option value="17">TRINIDAD AND TOBAGO</option>
                                        <option value="18">AMERICA</option>

                                    </select>
                                </div>
                            </div>
                        </div>
                                    <div class="col-lg-12 col-xl-8">
                                        <div class="row container-row">

                                            <div class="col-12">
                                                <div class="row settings-bio">
                                                    <div class="col-12 col-sm-3">
                                                        <p class="input-header setting-text">BIOGRAPHY: </p>
                                                    </div>
                                                    <div class="col-12 col-sm-9 input-area">
                                                        <div class="row">
                                                            <div class="col-10 text-container">
                                                                <p id="settings-text-0" class="settings-text "></p>
                                                                <textarea type="text" id="settings-input-0" class="settings-input display-n"></textarea>
                                                            </div>
                                                            <div class="col-2 edit-btn-cont">
                                                                <i class="fas fa-pen toggle-edit-mode" onclick="toggleEditSetting(0)"></i>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>


                                        <div class="row container-row">
                                            <div class="col-12 col-sm-3">
                                                <p class="input-header setting-text">USERNAME: </p>
                                            </div>
                                            <div class="col-12 col-sm-9 input-area">
                                                <div class="row">
                                                    <div class="col-10">
                                                        <p id="settings-text-1" class="settings-text ">{Username}</p>

                                                    </div>
                                                    <div class="col-2 edit-btn-cont">

                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row container-row">
                                            <div class="col-12 col-sm-3">
                                                <p class="input-header setting-text">DISPLAY NAME: </p>
                                            </div>
                                            <div class="col-12 col-sm-9 input-area">
                                                <div class="row">
                                                    <div class="col-10">
                                                        <p id="settings-text-2" class="settings-text ">{DisplayName}</p>
                                                        <input type="text" id="settings-input-2" class="settings-input display-n" />
                                                    </div>
                                                    <div class="col-2 edit-btn-cont">
                                                        <i class="fas fa-pen toggle-edit-mode" onclick="toggleEditSetting(2)"></i>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row container-row">
                                            <div class="col-12 col-sm-3">
                                                <p class="input-header setting-text">DATE OF BIRTH: </p>
                                            </div>
                                            <div class="col-12 col-sm-9 input-area">
                                                <div class="row">
                                                    <div class="col-10">
                                                        <p id="settings-text-3" class="settings-text ">{DOB}</p>
                                                        <input type="text" id="settings-input-3" class="settings-input display-n" />
                                                    </div>
                                                    <div class="col-2 edit-btn-cont">
                                                        <i class="fas fa-pen toggle-edit-mode" onclick="toggleEditSetting(3)"></i>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row container-row">
                                            <div class="col-12 col-sm-3">
                                                <p class="input-header setting-text">EMAIL: </p>
                                            </div>
                                            <div class="col-12 col-sm-9 input-area">
                                                <div class="row">
                                                    <div class="col-10">
                                                        <p id="settings-text-4" class="settings-text ">{Email}</p>
                                                        <input type="text" id="settings-input-4" class="settings-input display-n" />
                                                    </div>
                                                    <div class="col-2 edit-btn-cont">
                                                        <i class="fas fa-pen toggle-edit-mode" onclick="toggleEditSetting(4)"></i>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row container-row">
                                            <div class="col-12 col-sm-3">
                                                <p class="input-header setting-text">GENDER: </p>
                                            </div>
                                            <div class="col-12 col-sm-9 input-area">
                                                <div class="row">
                                                    <div class="col-10">
                                                        <p id="settings-text-5" class="settings-text ">{Gender}</p>
                                                        <input type="text" id="settings-input-5" class="settings-input display-n" />
                                                    </div>
                                                    <div class="col-2 edit-btn-cont">
                                                        <i class="fas fa-pen toggle-edit-mode" onclick="toggleEditSetting(5)"></i>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row container-row">
                                            <div class="col-12 col-sm-3">
                                                <p class="input-header setting-text">FAVORITE GAMES: </p>
                                            </div>
                                            <div class="col-12 col-sm-9 input-area">
                                                <div class="row">
                                                    <div class="col-10">
                                                        <div class="tags-selection-cont">
                                                            <input class="input-tags" type="text" data-role="tagsinput" value="Stardew, Call Of Duty, CSGO" size="15" />
                                                        </div>
                                                    </div>
                                                    <div class="col-2 edit-btn-cont">
                                                        <i class="fas fa-pen toggle-edit-mode" onclick="Gamesfocus()"></i>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>


                                    </div>
                                </div>
                                <div class="col-12 col-sm-6 col-lg-6 col-xl-4 settings-final-row delete-btn order-sm-4 order-5">
                                    <div class="settings-row">
                                        <button class="arc-btn" onclick="DeleteAccount();" type="button" data-toggle="collapse" data-target="#create-comunity-cont" aria-expanded="false" aria-controls="create-comunity-cont">
                                            Delete Account <i class="fas fa-exclamation-circle"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="col-12 col-sm-6 col-lg-6 col-xl-8 order-sm-5 order-4">
                                    <div id="save-settings" class="settings-row">
                                        <button class="arc-btn" type="button" onclick="UpdatingProfile();">
                                            Save Changes
                                        </button>
                                    </div>
                                </div>
                            </div>-->
                    </div>
                    <div id="arc-site-notifications">
                        <h1 class="side-panel-header">ADMIN PANEL</h1>
                        <div class="row arc-admin-page">
                            <div class="col-12 admin-tabs">
                                <ul class="nav mb-3" id="pills-tab" role="tablist">
                                    <li class="nav-pills" role="presentation">
                                        <a class="nav-link active" id="admin-users-report-tab" data-toggle="pill" href="#admin-users-report" role="tab" aria-controls="admin-users-report" aria-selected="true">USERS</a>
                                    </li>
                                    <li class="nav-pills" role="presentation">
                                        <a class="nav-link" id="admin-community-report-tab" data-toggle="pill" href="#admin-community-report" role="tab" aria-controls="admin-community-report" aria-selected="false">COMMUNITIES</a>
                                    </li>
                                    <li class="nav-pills" role="presentation">
                                        <a class="nav-link" id="admin-flag-report-tab" data-toggle="pill" href="#admin-flag-report" role="tab" aria-controls="admin-flag-report" aria-selected="false">REPORTS</a>
                                    </li>
                                    <li class="nav-pills" role="presentation">
                                        <a class="nav-link" id="admin-appeal-report-tab" data-toggle="pill" href="#admin-appeal-report" role="tab" aria-controls="admin-appeal-report" aria-selected="false">APPEALS</a>
                                    </li>
                                </ul>
                            </div>
                            <div class="col-12">
                                <div class="tab-content" id="pills-tabContent">
                                    <div class="tab-pane fade show active" id="admin-users-report" role="tabpanel" aria-labelledby="admin-users-report-tab">
                                        <div class="row">
                                            <div class="col-12">
                                                <h3>USERS</h3>
                                            </div>

                                            <div class="admin-tbl-cont  col-12">
                                                <table class="admin-table">
                                                    <tr>
                                                        <th>ID</th>
                                                        <th>DISPLAY NAME</th>
                                                        <th>USERNAME</th>
                                                        <th>SHARDS</th>
                                                        <th>VERIFIED</th>
                                                        <th>MUTED<span class="reference"> ( <i class="fas fa-volume-up"></i> / <i class="fas fa-volume-mute "></i> )</span></th>
                                                        <th>BANNED<span class="reference"> ( <i class="fas fa-user"></i> / <i class="fas fa-user-slash"></i> )</span></th>
                                                    </tr>
                                                    @Html.Raw(Classes.AdminPannel.GetUserRows(HttpContextAccessor.HttpContext.Request.Cookies["SessionID"]))
                                                </table>
                                            </div>

                                        </div>
                                    </div>

                                    <div class="tab-pane fade" id="admin-community-report" role="tabpanel" aria-labelledby="admin-community-report-tab">
                                        <div class="row">
                                            <div class="col-12">
                                                <h3>COMMUNITIES</h3>
                                            </div>
                                            <div class="admin-tbl-cont  col-12">
                                                <table class="admin-table">
                                                    <tr>
                                                        <th>ID</th>
                                                        <th>COMMUNITY NAME</th>
                                                        <th>TYPE</th>
                                                        <th>MEMBERS</th>
                                                        <th>PUBLIC / PRIVATE <span class="reference">( <i class="fas fa-user"></i> / <i class="fas fa-user-shield"></i> )</span></th>
                                                        <th>HIDDEN <span class="reference"> ( <i class="fas fa-eye"></i> / <i class="fas fa-eye-slash"></i> )</span></th>
                                                        <th></th>
                                                    </tr>
                                                    @Html.Raw(Classes.AdminPannel.GetCommunitiesRows(HttpContextAccessor.HttpContext.Request.Cookies["SessionID"]))
                                                </table>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="tab-pane fade" id="admin-flag-report" role="tabpanel" aria-labelledby="admin-flag-report-tab">
                                        <div class="row">
                                            <div class="col-12">
                                                <h3>REPORTS</h3>
                                            </div>
                                            <div class="admin-tbl-cont col-12">
                                                <table class="admin-table">
                                                    <tr>
                                                        <th>ID</th>
                                                        <th>USERNAME</th>
                                                        <th>VIEW</th>
                                                        <th> </th>
                                                    </tr>
                                                    @Html.Raw(Classes.AdminPannel.getReports(HttpContextAccessor.HttpContext.Request.Cookies["SessionID"]))
                                                </table>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="tab-pane fade" id="admin-appeal-report" role="tabpanel" aria-labelledby="admin-appeal-report-tab">
                                        <div class="row">
                                            <div class="col-12">
                                                <h3>APPEALS</h3>
                                            </div>

                                            <div class="admin-tbl-cont col-12">
                                                <table class="admin-table">
                                                    <tr>
                                                        <th>ID</th>
                                                        <th>DISPLAY NAME</th>
                                                        <th>BAN REASON</th>
                                                        <th>APPEAL REQUEST</th>
                                                        <th>IGNORE</th>
                                                        <th>PARDON</th>
                                                    </tr>
                                                    @Html.Raw(Classes.AdminPannel.getAppeals(HttpContextAccessor.HttpContext.Request.Cookies["SessionID"]))

                                                </table>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="arc-site-chat">

                        <div id="arc-chat">
                            <div class="row mx-md-n5">
                                <div class="col-12 col-sm-12 col-md-5 col-lg-5 col-xl-4 arc-search-users">
                                    <div class="col-content">
                                        <center><input id="userSearch" class="arc-search-chat" onchange="getUsers()" autocomplete="off" type="text" placeholder="SEARCH..." /></center>
                                        <!-- recent chat person 1 Start -->
                                        <div id="RECENT">

                                            @Html.Raw(FINAL.Pages.Classes.ContentPull.getRecents(SessionID, false))
                                        </div>
                                        <!-- recent chat person 1 End -->
                                    </div>
                                </div>
                                <div class="col-12 col-sm-12 col-md-7 col-lg-7 col-xl-8 ">
                                    <div id="arc-open-chats" class="col-content">
                                        <div id="messagesList" class="chat-messages">
                                            <center><img src="~/images/selectContact.png" style="width:80%; margin-top:150px;" /></center>
                                        </div>
                                        <div id="message-area">
                                            <div id="input-area">
                                                <input id="messageInput" type="text" placeholder="SELECT A CONTACT" />
                                                <i class="fas fa-location-arrow" onclick="sendClick();"></i>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Site Search End -->
                    <!-- Site Search Start -->
                    <div id="arc-site-search">
                        <h1 class="side-panel-header">SEARCH</h1>
                        <input class="arc-search-input" id="searchbarmain" onchange="search();" placeholder="SEARCH..." />
                        <div class="row">
                            <div class="col-12 col-lg-6 search-results">
                                <h3>USERS</h3>
                                <div class="col-content" id="searchUsers"></div>
                            </div>
                            <div class="col-12 col-lg-6 search-results">
                                <h3>COMMUNITIES</h3>
                                <div class="col-content" id="searchCommunities"></div>
                            </div>
                        </div>
                    </div>
                </div>
            }
            @RenderBody()





            <script src="~/lib/bootstrap/bootstrap-tagsinput.js">
            </script>

            <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
            <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.6.0/js/bootstrap.min.js">
            </script>-->
            <script src="~/js/site.js" asp-append-version="true">
            </script>
            @RenderSection("Scripts", required: false)


        </div>
        </div>
    </body>

